{% extends 'base.html' %}
{% load static %}


{% block content %}

          <section class="text-gray-700 body-font">
              <div class="container mx-auto flex px-5 py-24 md:flex-row flex-col items-center">
                  <div class=" lg:flex-grow md:w-2/3 lg:p-8 md:p-1 sm:p-1 flex flex-col md:items-start md:text-left mb-16 md:mb-0 items-center text-center ">

                  </div>
                  <div class="lg:flex-none lg:max-w-lg lg:w-1/3 md:w-2/3 w-full">
                  <h1 class="title-font sm:text-4xl text-3xl mb-4 font-anton font-medium text-gray-700">LOREM IPSUM
                  </h1>
                  <p class="mb-8 leading-relaxed">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid et inventore molestiae rem sit sunt ullam velit? Aperiam beatae consequuntur cum ea, illo iste necessitatibus nulla quia repellendus sapiente temporibus!</p>
                  </div>

              </div>
          </section>
          <section class="text-gray-700 bg-csis-1 body-font">
              <div class="container px-5 py-24 mx-auto">
                <div class="flex flex-col">
                  <div class="h-1 bg-gray-200 rounded overflow-hidden">
                    <div class="w-24 h-full bg-teal-500"></div>
                  </div>
                  <div class="flex flex-wrap sm:flex-row flex-col py-6 mb-12">
                    <h1 class="sm:w-2/5 text-gray-700 font-medium title-font font-anton text-2xl mb-2 sm:mb-0">Indeks Intensitas Covid-19</h1>
                    <p class="sm:w-3/5 leading-relaxed text-base sm:pl-10 pl-0">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Asperiores cum dignissimos dolorum, et expedita illum incidunt ipsa magni molestias natus placeat sapiente tempore! Atque blanditiis nulla tempore. Aut, blanditiis, deleniti.</p>
                  </div>
                </div>

          </section>
          <section class="text-gray-700 body-font overflow-hidden">
              <div class="container px-5 py-24 mx-auto">
                <div class="lg:w-5/5 mx-auto flex flex-wrap">
                  <div class='lg:w-2/3 w-full h-64 object-cover object-center rounded bg-gray-200 shadow-2xl chrt' >
                    <div class="flourish-embed" data-src="story/768331"><script src="https://public.flourish.studio/resources/embed.js"></script></div>
                      <div class="lg:w-1/3 w-full lg:pl-10 lg:py-6 mt-6 lg:mt-0">
                    <h2 class="text-sm title-font text-gray-500 tracking-widest">CSIS COVID-19 Index</h2>
                      <br>
                    <h1 class="text-gray-700 text-3xl title-font font-medium font-anton mb-1">Tingkat Inflasi Bahan Makanan (MoM)</h1>
                    <p class="leading-relaxed">Tingkat inflasi komoditas pangan dibandingkan dengan bulan sebelumnya.</p>

                    </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>
          <section class="text-gray-700 bg-csis-1 body-font overflow-hidden">
              <div class="container px-5 py-24 mx-auto">
                <div class="lg:w-5/5 mx-auto flex flex-wrap">
                  <div class="lg:w-1/3 w-full lg:pr-10 lg:py-6 mt-6 lg:mt-0">
                    <h2 class="text-sm title-font text-gray-500 tracking-widest">CSIS COVID-19 Index</h2>
                    <h1 class="text-gray-700 text-3xl title-font font-medium font-anton mb-1">Tingkat Inflasi Bahan Makanan (YoY)</h1>
                      <br>
                    <p class="leading-relaxed">Grafik perubahan tingkat inflasi bahan makanan dibandingkan dengan tahun sebelumnya.</p>

                  </div>


                </div>
              </div>
            </section>
          <section class="text-gray-900 body-font">
            <div class="container mx-auto flex px-5 py-24 items-center justify-center flex-col">
              <iframe class="shadow embed-responsive-item vidyout" src="https://www.youtube.com/embed/KLjwZ3O9tDU" frameborder="2"></iframe>
                <div class="text-center lg:w-2/3 w-full">
                <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium font-anton text-gray-900">CSIS YOUTUBE</h1>
                <p class="mb-8 leading-relaxed">Sejak bulan Maret 2020, CSIS aktif mengadakan studi terkait penanganan Covid-19 dalam sudut pandang pengelolaan bencana, ekonomi, sosial dan politik. Saksikan rangkaian Webinar kami di kanal YouTube CSIS: CSIS Indonesia.</p>

              </div>
            </div>
          </section>
          <!--section class="text-gray-700 bg-gray-300 body-font bg-white shadow">
            <div id="map" class="container px-5 py-24 mx-auto" style="">
            </div>
          </section-->
 {% endblock content %}

        {% block js %}
          <script type="text/javascript" src="{% static 'peta/indonesia-prov.js' %}"></script>
          <script type="text/javascript">
                var map = L.map('map').setView([-2.546, 118.016], 5);
                L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
                    maxZoom: 18,
                    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                        '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                        'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
                    id: 'mapbox/light-v9',
                    tileSize: 512,
                    zoomOffset: -1
                }).addTo(map);

                    // control that shows state info on hover
                var info = L.control();

                info.onAdd = function (map) {
                    this._div = L.DomUtil.create('div', 'info');
                    this.update();
                    return this._div;
                };

                info.update = function (props) {
                    this._div.innerHTML = '<h4>COVID Index Provinsi Indonesia</h4>' +  (props ?
                        '<b>' + props.Propinsi + '</b></br><p>Index Pergerakan:' + props.indexPergerakan + '</p><p>Intensitas Covid:' + props.intensitasCovid +'</p><p>Jumlah Penduduk: ' + props.jumlahPenduduk + '</p><p>Update: ' + props.update +'</p>'
                        : 'Hover over a state');
                };

                info.addTo(map);


                // get color depending on population index value
                function getColor(d) {
                    return d > 1000 ? '#800026' :
                            d > 500  ? '#BD0026' :
                            d > 200  ? '#E31A1C' :
                            d > 100  ? '#FC4E2A' :
                            d > 50   ? '#FD8D3C' :
                            d > 20   ? '#FEB24C' :
                            d > 10   ? '#FED976' :
                                        '#FFEDA0';
                }

                function style(feature) {
                    return {
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 0.7,
                        fillColor: getColor(feature.properties.index)
                    };
                }

                function highlightFeature(e) {
                    var layer = e.target;

                    layer.setStyle({
                        weight: 5,
                        color: '#666',
                        dashArray: '',
                        fillOpacity: 0.7
                    });

                    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
                        layer.bringToFront();
                    }

                    info.update(layer.feature.properties);
                }

                var geojson;

                function resetHighlight(e) {
                    geojson.resetStyle(e.target);
                    info.update();
                }

                function zoomToFeature(e) {
                    map.fitBounds(e.target.getBounds());
                }

                function onEachFeature(feature, layer) {
                    layer.on({
                        mouseover: highlightFeature,
                        mouseout: resetHighlight,
                        click: zoomToFeature
                    });
                }

                geojson = L.geoJson(statesData, {
                    style: style,
                    onEachFeature: onEachFeature
                }).addTo(map);

                map.attributionControl.addAttribution('Index data &copy; <a href="http://csis.or.id/">CSIS Indoneisa</a>');


                var legend = L.control({position: 'bottomright'});

                legend.onAdd = function (map) {

                    var div = L.DomUtil.create('div', 'info legend'),
                        grades = [0, 10, 20, 50, 100, 200, 500, 1000],
                        labels = [],
                        from, to;

                    for (var i = 0; i < grades.length; i++) {
                        from = grades[i];
                        to = grades[i + 1];

                        labels.push(
                            '<i style="background:' + getColor(from + 1) + '"></i> ' +
                            from + (to ? '&ndash;' + to : '+'));
                    }

                    div.innerHTML = labels.join('<br>');
                    return div;
                };

                legend.addTo(map);

              </script>
        {% endblock %}

